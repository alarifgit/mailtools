{% extends "base.html" %}
{% block content %}
<div class="toolbar-row">
  <div class="toolbar-left"><h1>Dig</h1></div>
</div>

<div class="rowlist">
  <div class="rowcard">
    <div class="row-left">
      <div class="row-title">Query</div>
      <div class="row-sub">A, CNAME, MX, TXT</div>
    </div>
    <div class="row-right full">
      <form method="post" class="form-grid">
        <input type="text" name="host" value="{{ host }}" placeholder="host.example.com" required>
        <select name="resolver" aria-label="DNS resolver">
          {% for key, val in presets.items() %}
            <option value="{{ key }}" {% if resolver==key %}selected{% endif %}>{{ val.label }}</option>
          {% endfor %}
        </select>
        <button type="submit" class="btn">Lookup</button>
        <div class="checks">
          <label class="chk"><input type="checkbox" name="a" {% if 'A' in selected %}checked{% endif %}><span>A</span></label>
          <label class="chk"><input type="checkbox" name="cname" {% if 'CNAME' in selected %}checked{% endif %}><span>CNAME</span></label>
          <label class="chk"><input type="checkbox" name="mx" {% if 'MX' in selected %}checked{% endif %}><span>MX</span></label>
          <label class="chk"><input type="checkbox" name="txt" {% if 'TXT' in selected %}checked{% endif %}><span>TXT</span></label>
        </div>
      </form>
    </div>
  </div>

  {% if results %}
    {% for block in results %}
    <div class="rowcard">
      <div class="row-left">
        <div class="row-title">{{ block.type }}</div>
        <div class="row-sub">{{ block.host }}</div>
      </div>
      <div class="row-right full">
        {% if block.records and block.records|length > 0 %}
          <ul class="list-plain">
            {% for rec in block.records %}
              <li><code class="mono">{{ rec }}</code></li>
            {% endfor %}
          </ul>
        {% else %}
          <div class="hint">No {{ block.type }} records found</div>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  {% endif %}
</div>
{% endblock %}